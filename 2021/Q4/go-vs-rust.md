# 决战紫禁之巅 - Rust Vs Go

在过去10年中，码江湖持续数十年的风平浪静，突然被两位异军突起的侠客所打破，他们神秘但不低调，嚣张却不滥杀，威名可止小儿啼。他们就是西门吹Go和叶孤Rust。

众人皆知，文无第一，武无第二，双方虽表面兄弟嘻嘻哈哈，但是异心早就埋下，遂相约在月圆之日决战紫禁之巅！而我Sunface，将作为自封的双方见证人，隔着山头(安全第一)为大家带来现场直播(其实是我想拜师，先来偷偷看看)。

## 剑道PK
只见二人掏出佩剑，贯以深厚的内力，在空中以剑代笔，挥斥方遒，竟靠一己之力营造出虚拟投影的效果。

以剑画字，剑快者自然占尽优势，但见叶孤Rust不仅人长得玉树临风，御剑速度也当得起当世顶尖的称号, 在我还在喊牛逼666之时，就已经洋洋洒洒写完，持剑玉立于旁，甚是孤傲，等待观众的评判，可惜他不知观众就我一人，否则定生尴尬。

"吾名叶孤Rust，于2006年拜师于Mozilla研究院，并于2015年学武有成，正式入江湖历练，因帅气和实力并存，蒙江湖人厚爱，连续6年成为江湖榜单Stackoverflow中最受欢迎之侠客。吾之剑道追求安全、极速和高效，但是所学甚难，汝等若想学，必先自宫，哦不是，必先潜心修炼，方能入吾之门。" 从文字可见此人的孤傲及不羁，真是实力与逼格兼具，我不禁感叹道。

西门吹Go人狠话不多，额头虽已见汗渍，但是也以相当快的速度完成，然后低调的站于一旁，只见他写道：
"我的剑道追求朴实无华，重剑无锋，于2007年拜入谷歌门下，继承了实用性的优点，并于2012年光速出师，并于2016年获评江湖正榜TIOBE最佳实用性语言，花里胡哨于我没用，若你们想学，只要跟着我练几遍，即可入门“ 原来是个实用至上粉，嗯，听起来我这等驽钝之辈也可入门，不错，不错，我的心有些痒痒的。

## 发挥场景PK
既然是招生,哦比武，那肯定要谈谈自己的剑道适用面，二位大侠亦不能免俗，继续写道。

"吾乃全能，上画星辰宇宙，下掘大地海洋。。。"，突然一个烂番茄横空出现，砸在他面前，伴随着一声大吼："说人话!!!", 叶孤Rust旋即改口道："嗯，我的剑法

- 非常适合写UI，无论是桌面UI或者是JS，都非常适合，目前相关的生态也在飞速发展中：[yew](https://yew.rs), [swc](https://swc.rs), [deno](https://deno.land)，未来甚至一统前端江湖，也未尝不可，极致的安全和快就是我的剑道优势

- 可以写Web层开发, 虽然难入门，但是安全性可以让你的应用运行的更稳定，性能可以帮助你节省大量服务器成本

- 非常适合写中间件和基础服务, 安全和高性能，同时又拥有强大的抽象和表达能力，如果我说不适合写这些高性能组件，估计你自己都不相信

- 非常适合系统开发，君不见这么挑剔毒嘴的linus，都把我纳入了linux内核之中，这份荣誉仅次于少林扫地僧C大师。同时也非常适合写系统工具、嵌入式，安全、高效、快速，简直就是完美的代名词

- 不太适合企业级应用，目前Java大哥还是绝对的王者，在他的领域中，我打不过他

也不知扔番茄的是哪位高人，竟恐怖如斯，让如此高傲的叶孤Rust都不得不暂时屈服！

另一边的西门吹Go就利索的多，非常符合实用派(工具人)定位:
- 写Web层，目前我是新生代绝对的王者，因为我的剑法简单、实用、速度也不错，你Rust拿头跟我比？ (旁边的叶孤Rust只是哼哼两声，并没有过多反驳，但是眼中那不服之意也很明显，或许他觉得未来还是有一战之力？真是期待啊)

- 我已经占领了容器和容器编排领域，运维工具上，谁与争锋？(没想到，他看上去这么低调，但是到了要表达自我的时候，竟然如此张狂，可怕可敬！)

- 额，其它领域嘛，我可以试试，但是不能给你们保证效果

月光下，二位大侠长身玉立，或翩翩君子或沉稳如山，都是如此的迷人，一时让我竟不知道如何抉择，要不再等等看? 

## 武功PK
论道结束，自然要手下见真章，但见二人打成一团，不分彼此，鸡飞狗跳，尘土飞扬，看来积怨真的已久，必须要大爆发一次方解恨。此情此景倒颇为符合静如处子，动若野狗的至高武功描述，看来二位对于大道均有所悟。

毕竟武功这块儿隔行如隔山，为了读者能看明白，从后面开始我们用大白话来说明(装逼太累了，还是正常写吧)。

#### 叶孤Rust的武功特点
总结来说，花里胡哨，异常全面，总之你想要的啥都有:
- 通过所有权系统实现无GC的同时，还不需要手动内存管理，同时避免各种野指针、数据竞争等头疼已久的内存安全问题
- 各种零损耗的抽象，既有现代化语言的高级抽象，又有系统语言的高性能
- 支持原生多线程并发，也支持`async/await`并发
- 跨平台
- 闪电般的性能，要不是我300hz的氪金咪咪眼，根本就看不清他的动作!
- 代码可维护性很高，文档、安全、完善的工具链等
- 难（个人猜测，难的原因就是啥都想要、啥都想追求完美，莫非叶孤Rust此人是一个既贪心又追求完美之人？我暗搓搓的想道）

#### 西门吹go的武功特点
江湖惯例，重要的事情说三遍, 实用，实用，还是实用:
- 有GC和运行时，因此不用操心内存管理
- 简单易上手，3天上手不是闹着玩的(西门吹go的剑谱目测还没有叶孤Rust的一半厚)
- 代码可维护性高，文档、完善的工具链等
- 跨平台和交叉编译
- 闪电般的编译速度
- 还可以的性能(看看了西门吹go的额头汗水，可能他在重度舞剑时，还是有些吃力，还是叶孤Rust潇洒啊)

再谈谈一些详细的感受(大侠名字太长了，我先用最后一个字代替-_-)：
- Rust有设计非常完善的泛型，Go目前刚准备发布初步的泛型支持
- Rust有设计非常完善的错误处理，Go目前还为人诟病：`if err != nil`
- Go的异步编程极其简单，Rust的`async/awati`大概复杂10倍
- 得益于各种高级特性，Rust可以写出函数式语言的简洁，Go嘛，比较啰嗦，但是可读性好 - 因为简单
- 宏和编译器插件，使得Rust扩展性很好
- Rust是显式接口，Go是隐式接口，前者写代码麻烦，后者读代码麻烦
- Rust无GC也无需手动管理内存, Go有GC
- Rust的包管理工具极其强大，Go的嘛，mu....至少有，要求那么多干嘛？
- Rust的模式匹配极其强大，可以写出很多dreaming code
- Rust的各种条件编译和条件依赖爽翻天
- Rust可以做几乎能想到的所有性能优化场景，Go的性能优化局限性较大

不仅感叹道，二位大侠在各自的道上，钻研都极深，导致了两位存在巨大的分歧，最终站上了紫禁之巅。

## 速度PK
又到了喜闻乐见的速度PK环节，在码江湖，流行最广的一句话就是：不服？来比比速度，速度鄙视链存在于你能想到的一切地方，对就连速度鄙视链本身都有鄙视链，比如那个“那个速度野榜凭什么跟我比？垃圾”。

#### 算法性能
因此，本次比拼的重头戏终于来临，先看一份江湖算法榜单对二位的速度评定:


从图中可以看出叶孤Rust的速度远快于西门吹Go(这个比拼的是两者摆好姿势全力以赴测试的结果，实际性能差距没有这么大).

#### web框架性能
再来看看，web框架的对比:

上图分别是双方最常用的web框架，差距一目了然(公允的说，gin不是go最快的，但是是go框架中最常用的里面最快的，因此这个对比并不意味着极致性能的差距有这么大，例如fasthttp就很快，但是我们更倾向于它是一个http服务而非web框架)

#### 搜索引擎性能
Rust和Go都有自己的搜索引擎，它们都有一个共同的梦想：在码江湖中击败如日中天的lucene(ES使用的搜索引擎),那我们来看看三者的不严谨性能对比(因为搜索引擎性能对比项非常多，因此我们计算总体性能，然后以最慢的那个作为基数1，方便对比):



总之，从速度能来看，叶孤Rust的优势是全面领先的.

## 真正的王者

巅峰对决依然在继续，但我决定撤了，因为之前的烂番茄是我扔的。。。

而我想要收集的信息已最终收集完成，并且也选定了未来的方向，那你呢？谁是你心中真正的王者？